<?xml version="1.0"?>
<launch>

  <env name="ROSCONSOLE_FORMAT" value="[${severity}] [${time}]: ${node}: ${message}"/>

  <!-- Parameters and Arguments -->
  <arg name="name"            /> <!-- Name of the vehicle being launched -->
  <arg name="vehicle_id"                  default="0" />

  <arg name="cooperative_control"         default="false" />
  <arg name="tracking_control"                 default="false" />   
  <arg name="dekf"                             default="false" />
  <arg name="trajectory_planning"              default="false" />
  <arg name="comms_slap_client"                default="false" />
  <arg name="comms_slap_server"                default="false" />
  <arg name="range_simulation"                 default="false" />

  <!-- Slap Cooperative_control -->
  <group ns="slap">
    <rosparam command="load" file="$(find slap_bringup)/config/vehicles/$(arg name)/slap.yaml"/>

    <!-- Vehicle Specific Config File -->
    <arg name="dollar" value="$" />

    <!-- Slap Cooperative control -->
    <group if="$(arg cooperative_control)">
      <node pkg="cooperative_control" type="cooperative_control_node" name="cooperative_control" output="screen" />
    </group>

    <!-- Slap Tracking control -->
    <group if="$(arg tracking_control)">
      <node pkg="tracking_control" type="tracking_control_node" name="tracking_control" output="screen" />
    </group>

    <!-- Slap dekf -->
    <group if="$(arg dekf)">
      <node pkg="dekf" type="dekf_node" name="dekf" output="screen" />
    </group>

    <!-- Slap trajectory planning -->
    <group if="$(arg trajectory_planning)">
      <node pkg="trajectory_planning" type="trajectory_planning_node" name="trajectory_planning" output="screen" />
    </group>
  
    <!-- Slap Comms Client -->
    <group if="$(arg comms_slap_client)">
      <node pkg="comms_slap" type="comms_slap_client_node" name="comms_client_slap" output="screen" />
    </group>

    <!-- Slap Comms Server -->
    <group if="$(arg comms_slap_server)">
      <node pkg="comms_slap" type="comms_slap_server_node" name="comms_server_slap" output="screen" />
    </group>

    <!-- Slap Range Simulation -->
    <group if="$(arg range_simulation)">
      <node pkg="range_simulation" type="range_simulation_node" name="range_simulation" output="screen" />
    </group>

  </group>

</launch>
